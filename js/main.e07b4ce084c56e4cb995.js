"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["main"],{

/***/ 806:
/*!********************!*\
  !*** ./app/app.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ 616);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _baseEngine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEngine */ 574);\n/* harmony import */ var _cameraController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cameraController */ 754);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ 671);\n/* harmony import */ var _interface__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interface */ 222);\n/* harmony import */ var _sceneManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sceneManager */ 686);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities */ 701);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! three */ 856);\n/* harmony import */ var _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @tweenjs/tween.js */ 253);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//App Class\r\nclass App extends _baseEngine__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\r\n\r\n    //App Constructor\r\n    constructor() {\r\n\r\n        //Base class constructor\r\n        super();\r\n\r\n        //Whether any load error set\r\n        this.loadErrorSet = false;\r\n        //Whether demo started\r\n        this.demoStarted = false;\r\n\r\n        //Meta configuration object\r\n        this.meta = {};\r\n\r\n        //Create camera controller\r\n        this.cameraController = new _cameraController__WEBPACK_IMPORTED_MODULE_2__.CameraController(this.renderer, window.innerWidth / window.innerHeight);\r\n        //Initialize SceneManager\r\n        _sceneManager__WEBPACK_IMPORTED_MODULE_5__.SceneManager.init(this.manager);\r\n\r\n        //Event listener  - Loading Manager Progress\r\n        this.manager.onProgress = this.onLoadProgress.bind(this);\r\n        //Event listener  - Loading Manager Error\r\n        this.manager.onError = this.onLoadError.bind(this);\r\n        //Event listener  - Loading Manager Completed\r\n        this.manager.onLoad = this.onLoadCompleted.bind(this);\r\n\r\n        //Event Listener - Window resize\r\n        window.addEventListener('resize', this.onContextResized.bind(this), true);\r\n        //Event Listener - Start Demo Button Click\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#btn-start-demo')[0].addEventListener('click', this.startDemo.bind(this));\r\n\r\n        //Event Listener - Entity color change\r\n        _interface__WEBPACK_IMPORTED_MODULE_4__.Interface.setOnEntityColor(_sceneManager__WEBPACK_IMPORTED_MODULE_5__.SceneManager.setEntityColor);\r\n        //Event Listener - Entity visibility change\r\n        _interface__WEBPACK_IMPORTED_MODULE_4__.Interface.setOnEntityVisible(_sceneManager__WEBPACK_IMPORTED_MODULE_5__.SceneManager.setEntityVisible);\r\n\r\n        //Initialize the scene\r\n        this.setupScene();\r\n\r\n        //Recalculate context\r\n        this.onContextResized();\r\n\r\n        //Start update routine\r\n        this.update();\r\n\r\n        //Progress counter\r\n        this.loadingProgress = 0;\r\n        this.totalAssets = 0;\r\n        this.loadedAssets = 0;\r\n        this.transitionProgress = 0;\r\n    }\r\n\r\n    //Initialize the configurator scene\r\n    async setupScene() {\r\n        try {\r\n            console.log('Setting up scene...');\r\n            //Load the stage model with garage\r\n            const { skyboxModel } = await _sceneManager__WEBPACK_IMPORTED_MODULE_5__.SceneManager.init(this.manager);\r\n            console.log('Garage model initialized:', skyboxModel);\r\n            \r\n            // Load the stage with garage model\r\n            _sceneManager__WEBPACK_IMPORTED_MODULE_5__.SceneManager.loadStage(this.scene, skyboxModel);\r\n            \r\n            //Load the Active model post meta data fetch\r\n            _utilities__WEBPACK_IMPORTED_MODULE_6__.NetworkUtils.fetchMeta(_config__WEBPACK_IMPORTED_MODULE_3__.ACTIVE_PATH, meta => {\r\n                this.meta = meta;\r\n                _sceneManager__WEBPACK_IMPORTED_MODULE_5__.SceneManager.loadActiveModel(this.scene, this.meta);\r\n            });\r\n        } catch (error) {\r\n            console.error('Error setting up scene:', error);\r\n        }\r\n    }\r\n\r\n    //Event - LoaderManager error\r\n    onLoadError(item) {\r\n\r\n        //Remove Loader Icon\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .icon').remove();\r\n        //Display load error\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .title').text(\"ERROR LOADING\");\r\n        //Display the load error item\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .desc').text(item);\r\n\r\n        //Set error flag\r\n        this.loadErrorSet = true;\r\n    }\r\n\r\n    //Event - LoaderManager progress\r\n    onLoadProgress(item, loaded, total) {\r\n        //Ignore if any load error occurred\r\n        if (this.loadErrorSet)\r\n            return;\r\n\r\n        //Update total assets count first time\r\n        if (this.totalAssets === 0) {\r\n            this.totalAssets = total;\r\n        }\r\n        this.loadedAssets = loaded;\r\n\r\n        //Calculate progress percentage\r\n        const progress = Math.floor((this.loadedAssets / this.totalAssets) * 100);\r\n        \r\n        //Update progress bar and text\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.progress-bar').css('width', progress + '%');\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.progress-text').text(progress + '%');\r\n        \r\n        //Update preloader description with current loading item\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .desc').text(item);\r\n    }\r\n\r\n    //Event - LoaderManager finished\r\n    onLoadCompleted() {\r\n        //Ignore if any load error occurred\r\n        if (this.loadErrorSet)\r\n            return;\r\n\r\n        //Update preloader content\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .icon').remove();\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .logo').show();\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .title').text('Toyota Kijang Innova');\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .desc').html('Zenix HEV Configurator');\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader .btn-main').show();\r\n        \r\n        //Hide progress bar when loading complete\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#loading-progress').hide();\r\n    }\r\n\r\n    //Event - Render context resized\r\n    onContextResized() {\r\n\r\n        //Set new renderer size\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        //Set new camera projection\r\n        this.cameraController.setAspect(window.innerWidth / window.innerHeight);\r\n    }\r\n\r\n    //Method - Start the demo\r\n    startDemo() {\r\n        //Ignore if any load error set or demo already started\r\n        if (this.loadErrorSet || this.demoStarted) return;\r\n\r\n        //State demo started \r\n        this.demoStarted = true;\r\n\r\n        //Show progress bar and hide start button\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#btn-start-demo').hide();\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('#loading-progress').show();\r\n\r\n        // Reset progress\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.progress-bar').css('width', '0%');\r\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.progress-text').text('0%');\r\n\r\n        // Mulai loading scene dengan waktu yang lebih singkat\r\n        this.loadSceneAsync().then(() => {\r\n            // Langsung transisi tanpa delay tambahan\r\n            _utilities__WEBPACK_IMPORTED_MODULE_6__.AnimUtils.fadeElementOut(jquery__WEBPACK_IMPORTED_MODULE_0___default()('#preloader')[0], 500, element => {\r\n                element.remove();\r\n                this.cameraController.mainCamera = this.cameraController.orbitCamera;\r\n                this.cameraController.setAspect(window.innerWidth / window.innerHeight);\r\n                _interface__WEBPACK_IMPORTED_MODULE_4__.Interface.initialize(this.meta);\r\n            });\r\n        });\r\n    }\r\n\r\n    // Method untuk loading scene secara async\r\n    async loadSceneAsync() {\r\n        return new Promise(async (resolve) => {\r\n            let sceneProgress = 0;\r\n            const totalProgress = 100;\r\n            const updateInterval = 20;\r\n            \r\n            // Setup promises untuk loading komponen\r\n            const setupPromises = {\r\n                lights: this.setupLights(),\r\n                materials: this.setupMaterials(),\r\n                textures: this.setupTextures()\r\n            };\r\n\r\n            const updateProgress = async () => {\r\n                if (sceneProgress < totalProgress) {\r\n                    sceneProgress += 1; // Lebih halus\r\n                    \r\n                    // Update UI\r\n                    jquery__WEBPACK_IMPORTED_MODULE_0___default()('.progress-bar').css('width', sceneProgress + '%');\r\n                    jquery__WEBPACK_IMPORTED_MODULE_0___default()('.progress-text').text(Math.floor(sceneProgress) + '%');\r\n\r\n                    // Check progress dan tunggu komponen selesai loading\r\n                    if (sceneProgress === 99) {\r\n                        // Tunggu semua setup selesai\r\n                        await Promise.all(Object.values(setupPromises));\r\n                    }\r\n\r\n                    setTimeout(updateProgress, updateInterval);\r\n                } else {\r\n                    resolve();\r\n                }\r\n            };\r\n\r\n            // Mulai progress\r\n            updateProgress();\r\n        });\r\n    }\r\n\r\n    // Setup components dengan Promise\r\n    async setupLights() {\r\n        return new Promise(async (resolve) => {\r\n            try {\r\n                const lights = [\r\n                    // Main directional light - sesuaikan intensitas dan posisi\r\n                    new three__WEBPACK_IMPORTED_MODULE_8__.DirectionalLight(0xffffff, 1.5),\r\n                    \r\n                    // Ambient light dengan intensitas lebih tinggi\r\n                    new three__WEBPACK_IMPORTED_MODULE_8__.AmbientLight(0xffffff, 0.6),\r\n                    \r\n                    // Point lights untuk detail garasi\r\n                    new three__WEBPACK_IMPORTED_MODULE_8__.PointLight(0xffffff, 1.0),\r\n                    new three__WEBPACK_IMPORTED_MODULE_8__.PointLight(0xffffff, 1.0)\r\n                ];\r\n                \r\n                // Sesuaikan posisi directional light\r\n                lights[0].position.set(10, 20, 10);\r\n                lights[0].castShadow = true;\r\n                \r\n                // Posisikan point lights di dalam garasi\r\n                lights[2].position.set(-10, 15, 0);\r\n                lights[3].position.set(10, 15, 0);\r\n                \r\n                // Add lights to scene\r\n                lights.forEach(light => this.scene.add(light));\r\n                \r\n                // Configure shadow properties\r\n                if (lights[0].shadow) {\r\n                    lights[0].shadow.mapSize.width = 2048;\r\n                    lights[0].shadow.mapSize.height = 2048;\r\n                    lights[0].shadow.camera.near = 0.5;\r\n                    lights[0].shadow.camera.far = 500;\r\n                    lights[0].shadow.bias = -0.0001;\r\n                }\r\n\r\n                console.log('Lights setup completed');\r\n                resolve(lights);\r\n            } catch (error) {\r\n                console.error('Error setting up lights:', error);\r\n                resolve(null);\r\n            }\r\n        });\r\n    }\r\n\r\n    async setupMaterials() {\r\n        return new Promise(async (resolve) => {\r\n            try {\r\n                const materials = {\r\n                    basic: new three__WEBPACK_IMPORTED_MODULE_8__.MeshBasicMaterial({ color: 0xffffff }),\r\n                    phong: new three__WEBPACK_IMPORTED_MODULE_8__.MeshPhongMaterial({ color: 0xffffff })\r\n                };\r\n\r\n                console.log('Materials setup completed');\r\n                resolve(materials);\r\n            } catch (error) {\r\n                console.error('Error setting up materials:', error);\r\n                resolve(null);\r\n            }\r\n        });\r\n    }\r\n\r\n    async setupTextures() {\r\n        return new Promise(async (resolve) => {\r\n            try {\r\n                const textureLoader = new three__WEBPACK_IMPORTED_MODULE_8__.TextureLoader();\r\n                textureLoader.setPath(_config__WEBPACK_IMPORTED_MODULE_3__.STAGE_PATH + 'scene_1/textures/');  // Remove 'textures/' from path\r\n                \r\n                // Update material textures mapping based on GLTF file URIs\r\n                const materialTextures = {\r\n                    'adskMatjalanan': ['adskMatjalananbasecolortexture.png'],\r\n                    'fasades': ['M_2.png', 'fasadesbasecolortexture.png'],\r\n                    'fasades2': ['fasades2basecolortexture.png'],\r\n                    'details': ['detailsbasecolortexture.png'],\r\n                    'KB3D_CTS_Sidewalk': ['KB3D_CTS_Sidewalkbasecolortexture.png'],\r\n                    'KB3D_CTS_SteelRoughBlackT': ['adskMatKB3D_CTS_SteelRoughBlackTbasecolortexture.png'],\r\n                    'conblock': ['conblockbasecolortexture.png', 'conblockmetallicroughnesstex.png'],\r\n                    'bg_oke': ['bg_okebasecolortexture.png'],\r\n                    'KB3D_CTS_ConcreteDecorA': ['KB3D_CTS_ConcreteDecorAbasecolortexture.png'],\r\n                    'KB3D_CTS_GreenHedge': ['KB3D_CTS_GreenHedgebasecolortexture.png'],\r\n                    'KB3D_CTS_LeafAtlas': ['KB3D_CTS_LeafAtlasbasecolortexture.png'],\r\n                    'KB3D_CTS_TreeWalnutBark': ['KB3D_CTS_TreeWalnutBarkbasecolortexture.png'],\r\n                    'KB3D_CTS_Lamps': ['KB3D_CTS_Lampsbasecolortexture.png'],\r\n                    'KB3D_CTS_MetalPaintGrayA': ['KB3D_CTS_MetalPaintGrayAbasecolortexture.png'],\r\n                    'adskMatrumput': ['adskMatrumputbasecolortexture.png']\r\n                };\r\n\r\n                // Helper function untuk load texture\r\n                const loadTexture = (materialName, filename) => {\r\n                    return new Promise((res, rej) => {\r\n                        // Check WebP support\r\n                        const supportsWebP = async () => {\r\n                            const webP = new Image();\r\n                            webP.src = 'data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==';\r\n                            return new Promise(resolve => {\r\n                                webP.onload = webP.onerror = () => resolve(webP.height === 1);\r\n                            });\r\n                        };\r\n\r\n                        // Convert path to WebP\r\n                        const getWebPPath = (path) => {\r\n                            return path.replace(/\\.(png|jpg|jpeg)$/, '.webp');\r\n                        };\r\n\r\n                        // Try loading WebP first, fallback to original format\r\n                        supportsWebP().then(hasWebP => {\r\n                            const texPath = hasWebP ? getWebPPath(filename) : filename;\r\n                            textureLoader.load(\r\n                                texPath,\r\n                                res,\r\n                                undefined,\r\n                                () => {\r\n                                    // If WebP fails, try original format\r\n                                    if (hasWebP) {\r\n                                        textureLoader.load(\r\n                                            filename,\r\n                                            res,\r\n                                            undefined,\r\n                                            () => res(null)\r\n                                        );\r\n                                    } else {\r\n                                        res(null);\r\n                                    }\r\n                                }\r\n                            );\r\n                        });\r\n                    });\r\n                };\r\n\r\n                // Load textures berdasarkan konfigurasi\r\n                const textures = await Promise.all(\r\n                    Object.entries(materialTextures).flatMap(([materialName, textureTypes]) =>\r\n                        textureTypes.map(type => loadTexture(materialName, type))\r\n                    )\r\n                );\r\n\r\n                console.log('Textures setup completed');\r\n                resolve(textures.filter(Boolean)); // Filter out null textures\r\n            } catch (error) {\r\n                console.error('Error setting up textures:', error);\r\n                resolve(null);\r\n            }\r\n        });\r\n    }\r\n\r\n    //App Update\r\n    update() {\r\n        super.update();\r\n        \r\n        // Update TWEEN animations\r\n        _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_7__.update();\r\n        \r\n        this.cameraController.update();\r\n        \r\n        this.renderer.render(this.scene, this.cameraController.mainCamera);\r\n        requestAnimationFrame(this.update.bind(this));\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new App());\r\n\n\n//# sourceURL=webpack:///./app/app.js?");

/***/ }),

/***/ 574:
/*!***************************!*\
  !*** ./app/baseEngine.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BaseEngine)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three */ 856);\n/* harmony import */ var three_examples_jsm_helpers_RectAreaLightHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three/examples/jsm/helpers/RectAreaLightHelper */ 210);\n/* harmony import */ var three_examples_jsm_libs_stats_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three/examples/jsm/libs/stats.module */ 811);\n/* harmony import */ var three_examples_jsm_lights_RectAreaLightUniformsLib__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three/examples/jsm/lights/RectAreaLightUniformsLib */ 336);\n/* harmony import */ var three_examples_jsm_loaders_EXRLoader__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/loaders/EXRLoader */ 284);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config */ 671);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities */ 701);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//Whether to show fps counter or not\r\nconst IS_DEBUG = false;\r\n\r\n//Scene background color\r\nconst SCENE_COLOR = 0x000000;\r\n\r\n//Area Light Dimension\r\nconst LIGHT_SIZE = new three__WEBPACK_IMPORTED_MODULE_6__.Vector2(12, 6);\r\n//Area Light Intensity\r\nconst LIGHT_INTENSITY = 8;\r\n//Area Light Color\r\nconst LIGHT_COLOR = 0xffffff;\r\n//Area Light - Left\r\nconst LIGHT_POS_LEFT = new three__WEBPACK_IMPORTED_MODULE_6__.Vector3(0, 16, -18);\r\nconst LIGHT_ROT_LEFT = _utilities__WEBPACK_IMPORTED_MODULE_5__.MathUtils.vector3DegToRadian({ x: -135, y: 0, z: -180 });\r\n//Area Light - Right\r\nconst LIGHT_POS_RIGHT = new three__WEBPACK_IMPORTED_MODULE_6__.Vector3(0, 16, 18);\r\nconst LIGHT_ROT_RIGHT = _utilities__WEBPACK_IMPORTED_MODULE_5__.MathUtils.vector3DegToRadian({ x: -45, y: 0, z: 0 });\r\n\r\n//------------------------------------------------------------ PRIVATE HELPER METHODS ------------------------------------------------------------\r\n\r\n//Create an AreaLight with Helper\r\nconst createAreaLight = (color, intensity, size, visible) => {\r\n\r\n    //Create an area light with parameters\r\n    var rectLight = new three__WEBPACK_IMPORTED_MODULE_6__.RectAreaLight(color, intensity, size.x, size.y);\r\n\r\n    //Create a light helper if set to visible\r\n    if (visible) {\r\n        const rectHelper = new three_examples_jsm_helpers_RectAreaLightHelper__WEBPACK_IMPORTED_MODULE_0__.RectAreaLightHelper(rectLight, 0xffffff);\r\n        rectLight.add(rectHelper);\r\n    }\r\n\r\n    //Return the resultant light object\r\n    return rectLight;\r\n}\r\n\r\n//------------------------------------------------------------ ENGINE ABSTRACT CLASS ------------------------------------------------------------\r\n\r\nclass BaseEngine {\r\n\r\n    //Class constructor\r\n    constructor() {\r\n\r\n        //Initialize Area Light Plugin Lib\r\n        three_examples_jsm_lights_RectAreaLightUniformsLib__WEBPACK_IMPORTED_MODULE_2__.RectAreaLightUniformsLib.init();\r\n\r\n        //Create engine renderer\r\n        this.renderer = new three__WEBPACK_IMPORTED_MODULE_6__.WebGLRenderer({ antialias: true });\r\n        this.renderer.setPixelRatio(window.devicePixelRatio);\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        this.renderer.setClearColor(SCENE_COLOR, 1);\r\n        this.renderer.sortObjects = false;\r\n        this.renderer.toneMapping = three__WEBPACK_IMPORTED_MODULE_6__.ACESFilmicToneMapping;\r\n        this.renderer.toneMappingExposure = 1.2;\r\n        this.renderer.outputEncoding = three__WEBPACK_IMPORTED_MODULE_6__.sRGBEncoding;\r\n\r\n        //Append renderer to body context\r\n        document.body.appendChild(this.renderer.domElement);\r\n\r\n        //Create root scene node\r\n        this.scene = new three__WEBPACK_IMPORTED_MODULE_6__.Scene();\r\n\r\n        //Set scene fog to make soft ground edges\r\n        this.scene.fog = new three__WEBPACK_IMPORTED_MODULE_6__.Fog(SCENE_COLOR, 45, 150);\r\n\r\n        //Add a Left Light\r\n        const mLeftLight = createAreaLight(LIGHT_COLOR, LIGHT_INTENSITY, LIGHT_SIZE, IS_DEBUG);\r\n        mLeftLight.position.copy(LIGHT_POS_LEFT);\r\n        mLeftLight.rotation.copy(LIGHT_ROT_LEFT)\r\n        this.scene.add(mLeftLight);\r\n\r\n        //Add a Right Light\r\n        const mRightLight = createAreaLight(LIGHT_COLOR, LIGHT_INTENSITY, LIGHT_SIZE, IS_DEBUG);\r\n        mRightLight.position.copy(LIGHT_POS_RIGHT);\r\n        mRightLight.rotation.copy(LIGHT_ROT_RIGHT);\r\n        this.scene.add(mRightLight);\r\n\r\n        //Create a loader manager\r\n        this.manager = new three__WEBPACK_IMPORTED_MODULE_6__.LoadingManager();\r\n\r\n        //Pre-Filtered, Mip-Mapped Radiance Environment Generator\r\n        const pmremGenerator = new three__WEBPACK_IMPORTED_MODULE_6__.PMREMGenerator(this.renderer);\r\n        //Precompile to use equirectangular shader to support equirectangular HDR maps\r\n        pmremGenerator.compileEquirectangularShader();\r\n\r\n        // //Create an RGBE Loader to handle PBR Rendering\r\n        // new EXRLoader(this.manager)\r\n        //     .setDataType(THREE.UnsignedByteType)\r\n        //     .setPath(EXR_PATH)\r\n        //     .load(EXR_FILE, exr => {\r\n\r\n        //         //Generate environment CubeMap from HDR texture\r\n        //         const envMap = pmremGenerator.fromEquirectangular(exr).texture;\r\n\r\n        //         //Set scene environment to use generated CubeMap for PBR lighting\r\n        //         this.scene.environment = envMap;\r\n\r\n        //         //Cleanup EXR HDR texture and helper\r\n        //         exr.dispose(); pmremGenerator.dispose()\r\n        //     });\r\n\r\n        //If FPS enabled\r\n        if (IS_DEBUG) {\r\n            //Create new profiler object\r\n            this.profiler = (0,three_examples_jsm_libs_stats_module__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\r\n            //Append profiler to body context\r\n            document.body.appendChild(this.profiler.dom);\r\n        }\r\n\r\n        // Enable shadow mapping\r\n        this.renderer.shadowMap.enabled = true;\r\n        this.renderer.shadowMap.type = three__WEBPACK_IMPORTED_MODULE_6__.PCFSoftShadowMap;\r\n\r\n        // Add directional light for shadows\r\n        const dirLight = new three__WEBPACK_IMPORTED_MODULE_6__.DirectionalLight(0xffffff, 1);\r\n        dirLight.position.set(5, 10, 5);\r\n        dirLight.castShadow = true;\r\n        \r\n        // Configure shadow properties\r\n        dirLight.shadow.mapSize.width = 2048;\r\n        dirLight.shadow.mapSize.height = 2048;\r\n        dirLight.shadow.camera.near = 0.5;\r\n        dirLight.shadow.camera.far = 50;\r\n        dirLight.shadow.camera.left = -20;\r\n        dirLight.shadow.camera.right = 20;\r\n        dirLight.shadow.camera.top = 20;\r\n        dirLight.shadow.camera.bottom = -20;\r\n        \r\n        this.scene.add(dirLight);\r\n    }\r\n\r\n    //Update method\r\n    update() {\r\n\r\n        //Update profiler if enabled\r\n        if (IS_DEBUG && this.profiler)\r\n            this.profiler.update();\r\n    }\r\n}\r\n\r\n\n\n//# sourceURL=webpack:///./app/baseEngine.js?");

/***/ }),

/***/ 754:
/*!*********************************!*\
  !*** ./app/cameraController.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CameraController: () => (/* binding */ CameraController)\n/* harmony export */ });\n/* harmony import */ var _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tweenjs/tween.js */ 253);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ 856);\n/* harmony import */ var three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three/examples/jsm/controls/OrbitControls */ 970);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities */ 701);\n\r\n\r\n\r\n\r\n\r\n//The camera startup position - moved closer to car\r\nconst ORBIT_CAM_POS = new three__WEBPACK_IMPORTED_MODULE_3__.Vector3(-30, 4.5, 12);\r\n//The camera lookAt target - slightly lower to better frame the car\r\nconst ORBIT_CAM_TARGET = new three__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 2.25, 0);\r\n\r\n//The cinematic sequence position array\r\nconst CINE_SEQUENCE_POINTS =\r\n    [\r\n        {\r\n            sP: { x: -28, y: -26, z: 3.5 },\r\n            eP: { x: -25, y: -23, z: 3.5 },\r\n            cR: { x: 0.0, y: -45, z: 5.0 },\r\n            tD: 9500\r\n        },\r\n        {\r\n            sP: { x: -18, y: 0, z: 2.5 },\r\n            eP: { x: -18, y: 0, z: 5.5 },\r\n            cR: { x: 0.0, y: -90, z: 0.0 },\r\n            tD: 5000\r\n        },\r\n        {\r\n            sP: { x: -13.50, y: -3.75, z: 3.75 },\r\n            eP: { x: -12.00, y: -5.50, z: 4.50 },\r\n            cR: { x: -41.79, y: -42.36, z: -19.55 },\r\n            tD: 7000\r\n        },\r\n        {\r\n            sP: { x: -10.50, y: -8.0, z: 1.50 },\r\n            eP: { x: -14.00, y: -12.0, z: 1.00 },\r\n            cR: { x: 10.12, y: -43.88, z: -7.06 },\r\n            tD: 7000\r\n        },\r\n        {\r\n            sP: { x: -13, y: -14, z: 14 },\r\n            eP: { x: 11, y: -14, z: 14 },\r\n            cR: { x: -38.28, y: 0.0, z: 0.0 },\r\n            tD: 12000\r\n        },\r\n        {\r\n            sP: { x: 12.85, y: -1.0, z: 4.35 },\r\n            eP: { x: 12.85, y: 0.70, z: 4.35 },\r\n            cR: { x: 47.34, y: 50.53, z: -33.90 },\r\n            tD: 7000\r\n        },\r\n        {\r\n            sP: { x: 13, y: -4.5, z: 2.5 },\r\n            eP: { x: 13, y: -4.5, z: 5.0 },\r\n            cR: { x: 0, y: 58, z: 5.35 },\r\n            tD: 7000\r\n        },\r\n        {\r\n            sP: { x: -3.3, y: -6.5, z: 5.0 },\r\n            eP: { x: 1.2, y: -6.5, z: 5.35 },\r\n            cR: { x: -30.65, y: -55.53, z: -1.88 },\r\n            tD: 5000\r\n        },\r\n        {\r\n            sP: { x: -13.85, y: -0.35, z: 3.15 },\r\n            eP: { x: -14.50, y: -1.1, z: 3.75 },\r\n            cR: { x: -35.54, y: -35.16, z: -15.17 },\r\n            tD: 8000\r\n        }\r\n    ];\r\n\r\nclass CameraController {\r\n\r\n    //Class constructor\r\n    constructor(renderer, aspect) {\r\n\r\n        //Callback Handler - OnCineComplete\r\n        this.onCineComplete = () => void 0;\r\n\r\n        //Array to keep all cinematic shot tweens\r\n        this.mCineShotsList = [];\r\n\r\n        //Create Cinematic Camera\r\n        this.cineCamera = new three__WEBPACK_IMPORTED_MODULE_3__.PerspectiveCamera(45, aspect, 0.1, 100);\r\n        this.cineCamera.position.copy(CINE_SEQUENCE_POINTS[0].sP)\r\n        this.cineCamera.rotation.copy(_utilities__WEBPACK_IMPORTED_MODULE_2__.MathUtils.vector3DegToRadian(CINE_SEQUENCE_POINTS[0].cR))\r\n\r\n        //Create Orbit Camera\r\n        this.orbitCamera = new three__WEBPACK_IMPORTED_MODULE_3__.PerspectiveCamera(60, aspect, 0.1, 100);\r\n        this.orbitCamera.position.copy(ORBIT_CAM_POS);\r\n\r\n        //Create OrbitControl\r\n        this.orbitControls = new three_examples_jsm_controls_OrbitControls__WEBPACK_IMPORTED_MODULE_1__.OrbitControls(this.orbitCamera, renderer.domElement);\r\n        this.orbitControls.target = ORBIT_CAM_TARGET;\r\n        this.orbitControls.enablePan = true;\r\n        this.orbitControls.enableZoom = true;\r\n        this.orbitControls.enableDamping = true;\r\n        this.orbitControls.minPolarAngle = 0;\r\n        this.orbitControls.maxPolarAngle = Math.PI / 2;\r\n        this.orbitControls.dampingFactor = 0.05;\r\n        this.orbitControls.rotateSpeed = 0.07;\r\n        this.orbitControls.minDistance = 3;\r\n        this.orbitControls.maxDistance = 48;\r\n        this.orbitControls.autoRotate = false;\r\n        this.orbitControls.autoRotateSpeed = 0.05;\r\n        this.orbitControls.colliderMeshes = [];\r\n\r\n        //Set cine camera as startup camera\r\n        this.mainCamera = this.cineCamera;\r\n\r\n        //Iterate through each sequence position array\r\n        for (var i = 0; i < CINE_SEQUENCE_POINTS.length; i++) {\r\n\r\n            //Get the tween starting point vector\r\n            var tweenStartPoint = _utilities__WEBPACK_IMPORTED_MODULE_2__.MathUtils.coordR2L(CINE_SEQUENCE_POINTS[i].sP);\r\n            //Get the tween end point vector\r\n            var tweenEndPoint = _utilities__WEBPACK_IMPORTED_MODULE_2__.MathUtils.coordR2L(CINE_SEQUENCE_POINTS[i].eP);\r\n            //Get the duration for this tween\r\n            var tweenDuration = CINE_SEQUENCE_POINTS[i].tD;\r\n\r\n            //Create the cinematic tween for current sequence\r\n            var cineTween = new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_0__.Tween(tweenStartPoint).to(tweenEndPoint, tweenDuration).easing(_tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_0__.Easing.Linear.None);\r\n\r\n            //On Tween Start\r\n            cineTween.onStart(((id) => {\r\n\r\n                //Apply camera rotation for the tween\r\n                return () => this.cineCamera.rotation.copy(_utilities__WEBPACK_IMPORTED_MODULE_2__.MathUtils.vector3DegToRadian(CINE_SEQUENCE_POINTS[id].cR))\r\n\r\n            })(i));\r\n\r\n            //On Tween Update\r\n            cineTween.onUpdate(pos => { this.cineCamera.position.set(pos.x, pos.y, pos.z); })\r\n\r\n            //Add the cinematic tween to shots list\r\n            this.mCineShotsList.push(cineTween);\r\n\r\n            //Chain the shot to previous\r\n            if (i > 0)\r\n                this.mCineShotsList[i - 1].chain(this.mCineShotsList[i]);\r\n        }\r\n\r\n        //Event will be triggered when the last tween is completed\r\n        this.mCineShotsList[this.mCineShotsList.length - 1].onComplete(() => this.onCineComplete());\r\n    }\r\n\r\n    //Event Setter - OnCineComplete\r\n    setOnCineComplete = (cb) => this.onCineComplete = cb;\r\n\r\n    //Update\r\n    update() {\r\n\r\n        //Update orbit controls if main camera is orbit camera\r\n        if (this.mainCamera === this.orbitCamera)\r\n            this.orbitControls.update();\r\n\r\n        //Update Tween Library\r\n        _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_0__.update();\r\n    }\r\n\r\n    //Set new aspect and update projection\r\n    setAspect(aspect) {\r\n\r\n        //Recalculate aspect for main camera\r\n        this.mainCamera.aspect = aspect;\r\n        //Update the projection matrix\r\n        this.mainCamera.updateProjectionMatrix();\r\n    }\r\n\r\n    startCinematic() {\r\n\r\n        //Stop ongoing cinematic shot chaining\r\n        this.stopCinematic();\r\n\r\n        //Start the first shot in cinematic sequence\r\n        this.mCineShotsList[0].start();\r\n    }\r\n\r\n    //Stop cinematic camera movement\r\n    stopCinematic() {\r\n        this.mCineShotsList.forEach(shot => shot.stop());\r\n    }\r\n}\n\n//# sourceURL=webpack:///./app/cameraController.js?");

/***/ }),

/***/ 671:
/*!***********************!*\
  !*** ./app/config.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACTIVE_PATH: () => (/* binding */ ACTIVE_PATH),\n/* harmony export */   CUBEMAP_PATH: () => (/* binding */ CUBEMAP_PATH),\n/* harmony export */   EXR_FILE: () => (/* binding */ EXR_FILE),\n/* harmony export */   EXR_PATH: () => (/* binding */ EXR_PATH),\n/* harmony export */   STAGE_PATH: () => (/* binding */ STAGE_PATH)\n/* harmony export */ });\n/*\r\n * Project :WebGL Car Configurator\r\n * File: config.js\r\n * Description : Asset configuration file\r\n * Date : 10/09/2021\r\n * License : MIT\r\n * Author : RendercodeNinja\r\n * URL : https://github.com/RendercodeNinja\r\n */\r\n\r\n//Model Paths\r\nconst STAGE_PATH = 'assets/stage/';\r\nconst ACTIVE_PATH = 'assets/zenix/';\r\nconst EXR_PATH = 'assets/exr/';\r\nconst EXR_FILE = 'royal_esplanade_1k.exr';\r\n// Cubemap textures path\r\nconst CUBEMAP_PATH = 'assets/cubemap/';\n\n//# sourceURL=webpack:///./app/config.js?");

/***/ }),

/***/ 222:
/*!**************************!*\
  !*** ./app/interface.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Interface: () => (/* binding */ Interface)\n/* harmony export */ });\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ 616);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ 671);\n/* harmony import */ var _sceneManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sceneManager */ 686);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities */ 701);\n/* harmony import */ var _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @tweenjs/tween.js */ 253);\n\r\n\r\n\r\n\r\n\r\n\r\n//Configurator Palette HTML Layout\r\nconst PALETTE_HTML = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`<div class=\"config-palette\">\r\n\r\n        <div class=\"config-palette__wrapper\">\r\n\r\n            <ul class=\"config-tab__list\">\r\n\r\n                <li>\r\n                    <a class=\"config-tab\" data-id=\"body_colors\">\r\n                        <span>COLOR</span>\r\n                    </a>\r\n                </li>                \r\n\r\n                <li>\r\n                    <a class=\"config-tab\" data-id=\"wheel_designs\">\r\n                        <span>RIM</span>\r\n                    </a>\r\n                </li>\r\n\r\n                <li>\r\n                    <a class=\"config-tab\" data-id=\"accessories\">\r\n                        <span>ACCESORIES</span>\r\n                    </a>\r\n                </li>\r\n\r\n                <li>\r\n                    <a class=\"config-tab\" data-id=\"ambience\">\r\n                        <span>AMBIENCE</span>\r\n                    </a>\r\n                </li>\r\n\r\n                <li>\r\n                    <a class=\"config-tab\" data-id=\"interior\">\r\n                        <span>INTERIOR</span>\r\n                    </a>\r\n                </li>\r\n\r\n            </ul>\r\n\r\n            <div class=\"config-options__wrap\">\r\n                <div id=\"body_colors\" class=\"config-options\">\r\n                    <ul>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div id=\"mirror_colors\" class=\"config-options\">\r\n                    <ul>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div id=\"wheel_designs\" class=\"config-options\">\r\n                    <ul>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div id=\"wheel_colors\" class=\"config-options\">\r\n                    <ul>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div id=\"caliper_colors\" class=\"config-options\">\r\n                    <ul>\r\n                    </ul>\r\n                </div>\r\n\r\n                <div id=\"ambience\" class=\"config-options\">\r\n                    <ul>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n     </div>`);\r\n\r\n//Singleton Interface Pattern\r\nconst Interface = (\r\n    function () {\r\n        // Private variables\r\n        let metaData = null;\r\n        let cBodyColor = null;\r\n        let cOVRMColor = null;\r\n        let cbOnEntityColor = null;\r\n        let cbOnEntityVisible = null;\r\n\r\n        // Tambahkan object untuk menyimpan state konfigurasi\r\n        let currentConfig = {\r\n            bodyColor: null,\r\n            mirrorColor: null, \r\n            wheelDesign: null,\r\n            wheelColor: null,\r\n            caliperColor: null\r\n        };\r\n\r\n        //Method - Append texture swatches for selected container\r\n        const appendTextureSwatches = (container, config, cb) => {\r\n\r\n            //Empty the container\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(container).empty();\r\n\r\n            //Iterate through each available design\r\n            config.colors.forEach(design => {\r\n\r\n                //Compose thumb image url from meta\r\n                const url = `${_config__WEBPACK_IMPORTED_MODULE_1__.ACTIVE_PATH}/${design.thumb}.png`;\r\n                //Compose the swatch element\r\n                const swatch = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`<li><button class=\"texture-swatch\" draggable=\"true\"><span>${design.name}</span></button></li>`)\r\n                //Apply image as button background\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('button', swatch).css({ 'background-image': 'url(' + url + ')' });\r\n                \r\n                // Bind click callback\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('button', swatch).on('click', ((t) => {\r\n                    return () => handleTextureChange(t, config, cb);\r\n                })(design.value));\r\n\r\n                // Bind drag events\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('button', swatch).on('dragstart', (event) => {\r\n                    event.originalEvent.dataTransfer.setData('text/plain', JSON.stringify({\r\n                        type: 'texture',\r\n                        value: design.value\r\n                    }));\r\n                });\r\n\r\n                //Add the texture swatch to target container\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()(container.append(swatch));\r\n            })\r\n\r\n            // Add drop handler for textures\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.config-palette').parent().on('drop', (event) => {\r\n                const data = JSON.parse(event.originalEvent.dataTransfer.getData('text/plain'));\r\n                if (data.type === 'texture') {\r\n                    handleTextureChange(data.value, config, cb);\r\n                }\r\n            });\r\n        }\r\n\r\n        //Method - Append color swatches for selected container\r\n        const appendColorSwatches = (container, config, def, cb) => {\r\n\r\n            //Empty the container\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(container).empty();\r\n\r\n            //Get the color array\r\n            var colorList = config.colors.slice(0);\r\n\r\n            //If default color available\r\n            if (def)\r\n                colorList.unshift({ \"name\": \"Current\", \"value\": def });\r\n\r\n            //Iterate through each available colors\r\n            colorList.forEach(color => {\r\n\r\n                //Compose the swatch element\r\n                const swatch = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`<li><button class=\"color-swatch\" draggable=\"true\"><span>${color.name}</span></button></li>`)\r\n                //Set the swatch color\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('button', swatch).css({ \"background\": color.value });\r\n                \r\n                // Bind click callback\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('button', swatch).on('click', ((e, c) => { \r\n                    return () => handleColorChange(e, c, config, cb);\r\n                })(config.target, color.value));\r\n\r\n                // Bind drag events\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('button', swatch).on('dragstart', (event) => {\r\n                    event.originalEvent.dataTransfer.setData('text/plain', JSON.stringify({\r\n                        target: config.target,\r\n                        color: color.value\r\n                    }));\r\n                });\r\n\r\n                //Add the color swatch to target container\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()(container).append(swatch);\r\n            })\r\n\r\n            // Add drop zone for the car viewport\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.config-palette').parent().on('dragover', (event) => {\r\n                event.preventDefault();\r\n            });\r\n\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.config-palette').parent().on('drop', (event) => {\r\n                event.preventDefault();\r\n                const data = JSON.parse(event.originalEvent.dataTransfer.getData('text/plain'));\r\n                handleColorChange(data.target, data.color, config, cb);\r\n            });\r\n        }\r\n\r\n        // Helper function untuk handle perubahan warna\r\n        const handleColorChange = (target, color, config, cb) => {\r\n            // Tambahkan animasi TWEEN saat perubahan warna\r\n            const mesh = _sceneManager__WEBPACK_IMPORTED_MODULE_2__.SceneManager.getMeshByMaterialName(target);\r\n            if (mesh) {\r\n                const targetColor = _utilities__WEBPACK_IMPORTED_MODULE_3__.ColorUtils.webColorToHex(color);\r\n                const currentColor = {\r\n                    r: mesh.material.color.r,\r\n                    g: mesh.material.color.g,\r\n                    b: mesh.material.color.b\r\n                };\r\n\r\n                new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_4__.Tween(currentColor)\r\n                    .to({\r\n                        r: targetColor.r,\r\n                        g: targetColor.g,\r\n                        b: targetColor.b\r\n                    }, 450) // Duration sama dengan di SceneManager\r\n                    .easing(_tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_4__.Easing.Quadratic.Out)\r\n                    .onUpdate(() => {\r\n                        mesh.material.color.setRGB(\r\n                            currentColor.r,\r\n                            currentColor.g,\r\n                            currentColor.b\r\n                        );\r\n                    })\r\n                    .start();\r\n            }\r\n\r\n            cb(target, color);\r\n            \r\n            // Update state berdasarkan target\r\n            switch(config.target) {\r\n                case 'Attitude_Black_pbr_shader53':\r\n                    currentConfig.bodyColor = color;\r\n                    break;\r\n                case 'Mt_MirrorCover':\r\n                    currentConfig.mirrorColor = color;\r\n                    break;\r\n                case 'Attitude_Black_pbr_shader59':\r\n                    currentConfig.wheelColor = color;\r\n                    break;\r\n                case 'Mt_BrakeCaliper':\r\n                    currentConfig.caliperColor = color;\r\n                    break;\r\n            }\r\n            \r\n            // Log current config state\r\n            console.log('Current Configuration:', currentConfig);\r\n        };\r\n\r\n        // Helper function untuk handle perubahan texture\r\n        const handleTextureChange = (value, config, cb) => {\r\n            cb(value);\r\n            currentConfig.wheelDesign = value;\r\n            \r\n            console.log('Current Configuration:', {\r\n                bodyColor: currentConfig.bodyColor,\r\n                mirrorColor: currentConfig.mirrorColor,\r\n                wheelDesign: currentConfig.wheelDesign,\r\n                wheelColor: currentConfig.wheelColor,\r\n                caliperColor: currentConfig.caliperColor\r\n            });\r\n        };\r\n\r\n        const appendAmbienceSwatches = (container, config, cb) => {\r\n            // Empty the container\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(container).empty();\r\n\r\n            console.log('Appending ambience swatches:', config); // Debug log\r\n\r\n            // Iterate through each available ambience\r\n            config.colors.forEach((ambience, index) => {\r\n                // Create swatch element\r\n                const swatch = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`\r\n                    <li>\r\n                        <button class=\"config-swatch\" data-value=\"${ambience.value}\">\r\n                            <img src=\"${_config__WEBPACK_IMPORTED_MODULE_1__.ACTIVE_PATH}/${ambience.preview}\" alt=\"${ambience.name}\" />\r\n                            <span>${ambience.name}</span>\r\n                        </button>\r\n                    </li>\r\n                `);\r\n\r\n                // Add active class to default option\r\n                if (index === config.default) {\r\n                    jquery__WEBPACK_IMPORTED_MODULE_0___default()('button', swatch).addClass('active');\r\n                }\r\n\r\n                // Bind click event\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()('button', swatch).on('click', function() {\r\n                    console.log('Ambience clicked:', ambience.value); // Debug log\r\n                    \r\n                    jquery__WEBPACK_IMPORTED_MODULE_0___default()('.config-swatch', container).removeClass('active');\r\n                    jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).addClass('active');\r\n                    \r\n                    // Panggil SceneManager.updateEnvironment\r\n                    _sceneManager__WEBPACK_IMPORTED_MODULE_2__.SceneManager.updateEnvironment(null, ambience.value);\r\n                });\r\n\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()(container).append(swatch);\r\n            });\r\n        };\r\n\r\n        //Event - Configuration Tab Clicked\r\n        const onConfigTabClicked = (item) => {\r\n\r\n            //Get the target tab\r\n            const target = jquery__WEBPACK_IMPORTED_MODULE_0___default()(item.currentTarget)\r\n            //Get target tab Id\r\n            const tabId = target.data('id');\r\n\r\n            //If the palette is already active\r\n            if (target.hasClass(\"active\")) {\r\n\r\n                //Empty the container\r\n                jquery__WEBPACK_IMPORTED_MODULE_0___default()(`#${tabId} > ul`, PALETTE_HTML).empty();\r\n                //Remove active and return\r\n                return target.removeClass('active');\r\n            }\r\n\r\n            //Deactivate all config tab links\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.config-tab', PALETTE_HTML).removeClass('active');\r\n            //Hide all config tab contents\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.config-options', PALETTE_HTML).hide();\r\n\r\n\r\n            //Get the target container for swatches\r\n            const container = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`#${tabId} > ul`, PALETTE_HTML);\r\n\r\n            if (tabId === 'ambience') {\r\n                appendAmbienceSwatches(container, metaData[tabId], (target, value) => {\r\n                    _sceneManager__WEBPACK_IMPORTED_MODULE_2__.SceneManager.updateEnvironment(null, value);\r\n                });\r\n            } else if (tabId === 'wheel_designs') {\r\n                appendTextureSwatches(container, metaData[tabId], (target) => {\r\n                    //Return if callback not hooked\r\n                    if (!cbOnEntityColor) return;\r\n        \r\n                    //Invoke callback with the wheel design color value\r\n                    cbOnEntityColor(metaData[tabId].target, target);\r\n                });\r\n            }\r\n            //Add the color swatches\r\n            else {\r\n                appendColorSwatches(container, metaData[tabId], (tabId === 'mirror_colors') ? cBodyColor : null, (target, color) => {\r\n\r\n                    //Return if callback not hooked\r\n                    if (!cbOnEntityColor) return;\r\n\r\n                    //Invoke callback (For target)\r\n                    cbOnEntityColor(target, color);\r\n\r\n                    //Cache OVRM color if target\r\n                    if (target == 'Mt_MirrorCover') cOVRMColor = color;\r\n\r\n                    //If Body color is target\r\n                    if (target == 'Mt_Body') {\r\n\r\n                        //Cache new body color\r\n                        cBodyColor = color;\r\n\r\n                        //If OVRM color is not custom, apply body color to OVRM also\r\n                        if (metaData.mirror_colors.colors.filter(e => e.value === cOVRMColor).length === 0)\r\n                            cbOnEntityColor('Mt_MirrorCover', color);\r\n                    }\r\n                })\r\n            }\r\n\r\n            //Set the current clicked tab active\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(`.config-tab[data-id=${tabId}]`, PALETTE_HTML).addClass(\"active\");\r\n            //Show the active config palette content\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()(`#${tabId}`, PALETTE_HTML).show();\r\n        }\r\n\r\n        //Method - Initialize Interface\r\n        const initialize = (meta) => {\r\n\r\n            //Cache meta data\r\n            metaData = meta;\r\n\r\n            // Set initial state\r\n            currentConfig.bodyColor = meta.body_colors.colors[meta.body_colors.default].value;\r\n            currentConfig.mirrorColor = meta.mirror_colors.colors[meta.mirror_colors.default].value;\r\n            currentConfig.wheelDesign = meta.wheel_designs.colors[meta.wheel_designs.default].value;\r\n            currentConfig.wheelColor = meta.wheel_colors.colors[meta.wheel_colors.default].value;\r\n            currentConfig.caliperColor = meta.caliper_colors.colors[meta.caliper_colors.default].value;\r\n\r\n            // Log initial config\r\n            console.log('Initial Configuration:', currentConfig);\r\n\r\n            //Append the Configurator palette to body\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append(PALETTE_HTML);\r\n\r\n            //Bind Event - Tab item clicked\r\n            jquery__WEBPACK_IMPORTED_MODULE_0___default()('.config-tab', PALETTE_HTML).on('click', onConfigTabClicked);\r\n        }\r\n\r\n        //Set Callback - Entity Color Change\r\n        const setOnEntityColor = (cb) => cbOnEntityColor = cb;\r\n        //Set Callback - Entity Visibility Change\r\n        const setOnEntityVisible = (cb) => cbOnEntityVisible = cb;\r\n\r\n        // Add method to get current config\r\n        const getCurrentConfig = () => {\r\n            return {...currentConfig};\r\n        }\r\n\r\n        //Return Public Methods/Properties\r\n        return { initialize, setOnEntityColor, setOnEntityVisible, getCurrentConfig }\r\n\r\n    }\r\n)();\n\n//# sourceURL=webpack:///./app/interface.js?");

/***/ }),

/***/ 686:
/*!*****************************!*\
  !*** ./app/sceneManager.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SceneManager: () => (/* binding */ SceneManager)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ 856);\n/* harmony import */ var three_examples_jsm_loaders_GLTFLoader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader */ 594);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ 671);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities */ 701);\n/* harmony import */ var _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tweenjs/tween.js */ 253);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Add helper function at the top\r\nconst getWebPTexturePath = (path) => {\r\n    return path.replace(/\\.(png|jpg|jpeg)$/, '.webp');\r\n};\r\n\r\n// Update texture loading in both init and updateEnvironment functions\r\nconst textureLoader = new three__WEBPACK_IMPORTED_MODULE_4__.TextureLoader();\r\ntextureLoader.setPath(_config__WEBPACK_IMPORTED_MODULE_1__.STAGE_PATH + 'garage/textures/');\r\n\r\n// Helper function for loading textures\r\nconst loadTextureWithWebP = (texturePath) => {\r\n    return new Promise((resolve, reject) => {\r\n        // Try WebP first\r\n        textureLoader.load(\r\n            getWebPTexturePath(texturePath),\r\n            resolve,\r\n            undefined,\r\n            () => {\r\n                // Fallback to original format\r\n                textureLoader.load(\r\n                    texturePath,\r\n                    resolve,\r\n                    undefined,\r\n                    reject\r\n                );\r\n            }\r\n        );\r\n    });\r\n};\r\n\r\nconst SceneManager = (() => {\r\n\r\n    //glTF Loader\r\n    let glTFLoader = null;\r\n    //Reference to the model object\r\n    let mActiveModel = null;\r\n    let skyboxModel = null;\r\n    let currentEnvironment = 'garage';\r\n    let scene = null;\r\n\r\n    //Method - Initialize SceneManager\r\n    const init = (loaderManager) => {\r\n        //Create a GLTF Loader\r\n        glTFLoader = new three_examples_jsm_loaders_GLTFLoader__WEBPACK_IMPORTED_MODULE_0__.GLTFLoader(loaderManager);\r\n\r\n        // Load garage model but keep it hidden by default\r\n        return new Promise((resolve, reject) => {\r\n            glTFLoader.setPath(_config__WEBPACK_IMPORTED_MODULE_1__.STAGE_PATH + 'garage/').load('scene.gltf', \r\n                (gltf) => {\r\n                    skyboxModel = gltf.scene;\r\n                    skyboxModel.visible = false; // Hide by default since we want white as default\r\n                    \r\n                    // Adjust scale for the new scene model\r\n                    skyboxModel.scale.set(1, 1, 1); // Adjust scale as needed\r\n                    \r\n                    // Adjust position if needed\r\n                    skyboxModel.position.set(0, 0, 0);\r\n                    \r\n                    skyboxModel.traverse((obj) => {\r\n                        if (obj.isMesh) {\r\n                            obj.castShadow = true;\r\n                            obj.receiveShadow = true;\r\n                            \r\n                            if (obj.material) {\r\n                                // Daftar material yang memiliki texture\r\n                                const materialTextures = {\r\n                                    'Material': ['baseColor', 'normal', 'metallicRoughness'],\r\n                                    'Door': ['baseColor', 'normal', 'metallicRoughness'],\r\n                                    'Material.003': ['baseColor', 'normal', 'metallicRoughness'],\r\n                                    'Barrel_01': ['baseColor', 'normal', 'metallicRoughness'],\r\n                                    'Material.005': ['baseColor', 'normal', 'metallicRoughness'],\r\n                                    'Material.008': ['baseColor'],\r\n                                    'Black_Plastic': ['baseColor'],\r\n                                    'Final1': ['baseColor', 'metallicRoughness']\r\n                                };\r\n\r\n                                // Use in material texture loading\r\n                                Object.entries(materialTextures).forEach(([materialName, textureTypes]) => {\r\n                                    textureTypes.forEach(async type => {\r\n                                        try {\r\n                                            const texture = await loadTextureWithWebP(`${materialName}_${type}.png`);\r\n                                            if (obj.material.name.includes(materialName)) {\r\n                                                if (type === 'baseColor') {\r\n                                                    obj.material.map = texture;\r\n                                                    obj.material.map.encoding = three__WEBPACK_IMPORTED_MODULE_4__.sRGBEncoding;\r\n                                                } else if (type === 'normal') {\r\n                                                    obj.material.normalMap = texture;\r\n                                                } else if (type === 'metallicRoughness') {\r\n                                                    obj.material.roughnessMap = texture;\r\n                                                    obj.material.metalnessMap = texture;\r\n                                                }\r\n                                                // Update material settings\r\n                                                obj.material.needsUpdate = true;\r\n                                            }\r\n                                        } catch (error) {\r\n                                            console.warn(`Failed to load texture: ${materialName}_${type}`);\r\n                                        }\r\n                                    });\r\n                                });\r\n                            }\r\n                            \r\n                            if (obj.material && obj.material.name === 'Material.001') {\r\n                                // Create new physical material untuk kaca/jendela\r\n                                obj.material = new three__WEBPACK_IMPORTED_MODULE_4__.MeshPhysicalMaterial({\r\n                                    color: 0x666666,     // Abu-abu medium\r\n                                    metalness: 0.3,      // Tingkatkan metallic untuk refleksi\r\n                                    roughness: 0.0,      // Sangat halus\r\n                                    transparent: true,    \r\n                                    opacity: 0.2,        // Lebih transparan\r\n                                    transmission: 0.8,    // Transmisi cahaya\r\n                                    clearcoat: 0.5,      // Kurangi clearcoat\r\n                                    clearcoatRoughness: 0.0,\r\n                                    side: three__WEBPACK_IMPORTED_MODULE_4__.DoubleSide, // Render kedua sisi\r\n                                    envMapIntensity: 2.0    // Tingkatkan refleksi environment\r\n                                });\r\n                                \r\n                                obj.material.name = 'Material.001';\r\n                                obj.material.needsUpdate = true;\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    console.log('Scene model loaded successfully');\r\n                    resolve({ skyboxModel });\r\n                },\r\n                undefined,\r\n                (error) => {\r\n                    console.error('Error loading scene model:', error);\r\n                    reject(error);\r\n                }\r\n            );\r\n        });\r\n    }\r\n\r\n    //Method - Load Stage Model\r\n    const loadStage = (targetScene, model) => {\r\n        //Throw error if SceneManager not initialized\r\n        if (!glTFLoader)\r\n            throw new Error('SceneManager init should be called.');\r\n\r\n        scene = targetScene;\r\n        // Don't override skyboxModel here since we want to keep the one from init\r\n        // skyboxModel = model; // Remove this line\r\n        \r\n        // Set default white background\r\n        scene.background = new three__WEBPACK_IMPORTED_MODULE_4__.Color(0xf2f2f2);\r\n        scene.environment = null;\r\n        \r\n        if (skyboxModel) {\r\n            skyboxModel.visible = false;\r\n            scene.add(skyboxModel);\r\n            console.log('Garage model added to scene but hidden');\r\n        }\r\n    }\r\n\r\n    //Method - Load Active Model with Meta\r\n    const loadActiveModel = (scene, meta) => {\r\n        //Throw error if SceneManager not initialized\r\n        if (!glTFLoader)\r\n            throw new Error('SceneManager init should be called.');\r\n\r\n        //Get the defaults for configurable\r\n        const defBody = meta.body_colors.default;\r\n        const defMirror = meta.mirror_colors.default;\r\n        const defAlloys = meta.wheel_designs.default;\r\n        const defCaliper = meta.caliper_colors.default;\r\n\r\n        //Get the startup colors for configurable\r\n        const dfCol_Body = _utilities__WEBPACK_IMPORTED_MODULE_2__.ColorUtils.webColorToHex(meta.body_colors.colors[defBody].value);\r\n        const dfCol_Mirror = _utilities__WEBPACK_IMPORTED_MODULE_2__.ColorUtils.webColorToHex(meta.mirror_colors.colors[defMirror].value);\r\n        const dfCol_Alloys = _utilities__WEBPACK_IMPORTED_MODULE_2__.ColorUtils.webColorToHex(meta.wheel_designs.colors[defAlloys].value);\r\n        const dfCol_Caliper = _utilities__WEBPACK_IMPORTED_MODULE_2__.ColorUtils.webColorToHex(meta.caliper_colors.colors[defCaliper].value);\r\n\r\n        //Use glTF loader to load the active model\r\n        glTFLoader.setPath(_config__WEBPACK_IMPORTED_MODULE_1__.ACTIVE_PATH).load('model_original.glb', model => {\r\n            //Cache active model for this instance\r\n            mActiveModel = model.scene;\r\n\r\n            // Adjust scale for garage interior (increased by 1.3x)\r\n            mActiveModel.scale.set(5.2, 5.2, 5.2); // Changed from 4 to 5.2 (4 * 1.3)\r\n\r\n            // Position the car at the center of garage\r\n            mActiveModel.position.set(0, -7.4, 0);\r\n\r\n            // Rotate to face garage opening\r\n            mActiveModel.rotation.y = Math.PI / 2; // 90 degrees rotation\r\n\r\n            //Iterate through the Aventador model\r\n            mActiveModel.traverse(obj => {\r\n                if (obj instanceof three__WEBPACK_IMPORTED_MODULE_4__.Mesh) {\r\n                    // Enable shadows untuk semua mesh\r\n                    obj.castShadow = true;\r\n                    obj.receiveShadow = true;\r\n\r\n                    //Set Color - Body\r\n                    if (obj.material.name === 'Attitude_Black_pbr_shader53')\r\n                        obj.material.color = dfCol_Body;\r\n                    //Set Color - Mirror Cover\r\n                    if (obj.material.name === 'Mt_MirrorCover')\r\n                        obj.material.color = dfCol_Mirror;\r\n                    //Set Color - Alloys\r\n                    if (obj.material.name === 'Attitude_Black_pbr_shader59')\r\n                        obj.material.color = dfCol_Alloys;\r\n                    //Set Color -Calipers\r\n                    if (obj.material.name === 'Mt_BrakeCaliper')\r\n                        obj.material.color = dfCol_Caliper;\r\n                    //Override Shadow Plane - Use MeshBasicMaterial\r\n                    if (obj.material.name === 'Mt_Shadow_Plane')\r\n                        obj.material = new three__WEBPACK_IMPORTED_MODULE_4__.MeshBasicMaterial({ color: 0xffffff, map: obj.material.map, transparent: true })\r\n                }\r\n            });\r\n\r\n            //Add model to scene\r\n            scene.add(mActiveModel);\r\n        });\r\n    }\r\n\r\n    //Method - Set entity color by material name\r\n    const setEntityColor = (targetMat, webColor) => {\r\n        //Iterate through the Aventador model\r\n        mActiveModel.traverse(obj => {\r\n            //If object is a mesh with material\r\n            if (obj instanceof three__WEBPACK_IMPORTED_MODULE_4__.Mesh) {\r\n                //If material name matched\r\n                if (obj.material.name === targetMat) {\r\n\r\n                    // Convert target web color to THREE.Color\r\n                    const targetColor = _utilities__WEBPACK_IMPORTED_MODULE_2__.ColorUtils.webColorToHex(webColor);\r\n\r\n                    // Get current color values\r\n                    const currentColor = {\r\n                        r: obj.material.color.r,\r\n                        g: obj.material.color.g,\r\n                        b: obj.material.color.b\r\n                    };\r\n\r\n                    // Create tween for smooth color transition\r\n                    new _tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_3__.Tween(currentColor)\r\n                        .to({\r\n                            r: targetColor.r,\r\n                            g: targetColor.g,\r\n                            b: targetColor.b\r\n                        }, 450) // Duration in milliseconds\r\n                        .easing(_tweenjs_tween_js__WEBPACK_IMPORTED_MODULE_3__.Easing.Quadratic.Out)\r\n                        .onUpdate(() => {\r\n                            obj.material.color.setRGB(\r\n                                currentColor.r,\r\n                                currentColor.g,\r\n                                currentColor.b\r\n                            );\r\n                        })\r\n                        .start();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    //Method - Set entity visibility by object name\r\n    const setEntityVisible = (targetName) => {\r\n\r\n        //Iterate through the Aventador model\r\n        mActiveModel.traverse(obj => {\r\n\r\n            //If this is a rim object\r\n            if (obj.name.includes('Obj_Rim')) {\r\n\r\n                //Show if name matches target, else hide it\r\n                obj.visible = obj.name.includes(targetName)\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    // Method untuk update skybox saja\r\n    const updateEnvironment = (camera, environmentType = 'default') => {\r\n        if (!scene) {\r\n            console.warn('Scene not initialized');\r\n            return;\r\n        }\r\n        \r\n        console.log('Updating environment to:', environmentType);\r\n        \r\n        // First, reset all environments\r\n        if (skyboxModel) {\r\n            skyboxModel.visible = false;\r\n            // Don't remove garage model when switching to other environments\r\n            if (currentEnvironment !== 'garage' && environmentType !== 'garage') {\r\n                scene.remove(skyboxModel);\r\n                skyboxModel = null;\r\n            }\r\n        }\r\n        scene.background = new three__WEBPACK_IMPORTED_MODULE_4__.Color(0xf2f2f2);\r\n        scene.environment = null;\r\n        \r\n        switch(environmentType) {\r\n            case 'scene_1': // outdoor\r\n                // Load scene_1 model\r\n                glTFLoader.setPath(_config__WEBPACK_IMPORTED_MODULE_1__.STAGE_PATH + 'scene_1/').load('scene.gltf',\r\n                    (gltf) => {\r\n                        const newSkyboxModel = gltf.scene;\r\n                        \r\n                        // Remove previous skybox if exists\r\n                        if (skyboxModel) {\r\n                            scene.remove(skyboxModel);\r\n                        }\r\n                        \r\n                        skyboxModel = newSkyboxModel;\r\n                        \r\n                        // Scale up the scene by 8x\r\n                        skyboxModel.scale.set(8, 8, 8);\r\n                        \r\n                        // Rotate 90 degrees to the right and move down\r\n                        skyboxModel.rotation.y = -Math.PI / 2;\r\n                        skyboxModel.position.y = -7.4;\r\n                        \r\n                        // Apply materials and textures\r\n                        skyboxModel.traverse((obj) => {\r\n                            if (obj.isMesh) {\r\n                                obj.castShadow = true;\r\n                                obj.receiveShadow = true;\r\n                                \r\n                                if (obj.material) {\r\n                                    const textureLoader = new three__WEBPACK_IMPORTED_MODULE_4__.TextureLoader();\r\n                                    textureLoader.setPath(_config__WEBPACK_IMPORTED_MODULE_1__.STAGE_PATH + 'scene_1/textures/');\r\n                                    \r\n                                    // Daftar material yang memiliki texture\r\n                                    const materialTextures = {\r\n                                        'adskMatjalananbasecolortexture': ['baseColor'],\r\n                                        'adskMatKB3D_CTS_SteelRoughBlackTbasecolortexture': ['baseColor'],\r\n                                        'adskMatrumputbasecolortexture': ['baseColor'],\r\n                                        'bg_okebasecolortexture': ['baseColor'],\r\n                                        'conblockbasecolortexture': ['baseColor'],\r\n                                        'conblockmetallicroughnesstex': ['baseColor'],\r\n                                        'detailsbasecolortexture': ['baseColor'],\r\n                                        'fasades2basecolortexture': ['baseColor'],\r\n                                        'fasadesbasecolortexture': ['baseColor'],\r\n                                        'KB3D_CTS_ConcreteDecorAbasecolortexture': ['baseColor'],\r\n                                        'KB3D_CTS_GreenHedgebasecolortexture': ['baseColor'],\r\n                                        'KB3D_CTS_Lampsbasecolortexture': ['baseColor'],\r\n                                        'KB3D_CTS_LeafAtlasbasecolortexture': ['baseColor'],\r\n                                        'KB3D_CTS_MetalPaintGrayAbasecolortexture': ['baseColor'],\r\n                                        'KB3D_CTS_Sidewalkbasecolortexture': ['baseColor'],\r\n                                        'KB3D_CTS_SteelRoughBlackTbasecolortexture': ['baseColor'],\r\n                                        'KB3D_CTS_TreeWalnutBarkbasecolortexture': ['baseColor'],\r\n                                        'M_2': ['baseColor']\r\n                                    };\r\n\r\n                                    // Load textures berdasarkan nama material\r\n                                    Object.entries(materialTextures).forEach(([materialName, textureTypes]) => {\r\n                                        if (obj.material.name.includes(materialName)) {\r\n                                            try {\r\n                                                if (textureTypes.includes('baseColor')) {\r\n                                                    let filename;\r\n                                                    // Handle different file extensions\r\n                                                    if (materialName.includes('KB3D_CTS')) {\r\n                                                        filename = `${materialName}.png`;\r\n                                                    } else {\r\n                                                        filename = `${materialName}.png`;\r\n                                                    }\r\n                                                    \r\n                                                    const baseColorMap = textureLoader.load(filename);\r\n                                                    obj.material.map = baseColorMap;\r\n                                                    obj.material.map.encoding = three__WEBPACK_IMPORTED_MODULE_4__.sRGBEncoding;\r\n                                                    \r\n                                                    // Set material properties\r\n                                                    obj.material.roughness = 1.0;\r\n                                                    obj.material.metalness = 0.0;\r\n                                                    obj.material.needsUpdate = true;\r\n                                                }\r\n                                            } catch (error) {\r\n                                                console.warn(`Failed to load texture for ${materialName}:`, error);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n                        \r\n                        // Add to scene\r\n                        scene.add(skyboxModel);\r\n                        skyboxModel.visible = true;\r\n                        \r\n                        // Set white background\r\n                        scene.background = new three__WEBPACK_IMPORTED_MODULE_4__.Color(0xf2f2f2);\r\n                        scene.environment = null;\r\n                        \r\n                        console.log('Scene 1 environment loaded');\r\n                    },\r\n                    undefined,\r\n                    (error) => {\r\n                        console.error('Error loading scene 1:', error);\r\n                    }\r\n                );\r\n                break;\r\n                \r\n            case 'city':\r\n                if (skyboxModel) skyboxModel.visible = false;\r\n                \r\n                const cubeTextureLoader = new three__WEBPACK_IMPORTED_MODULE_4__.CubeTextureLoader();\r\n                cubeTextureLoader.setPath(_config__WEBPACK_IMPORTED_MODULE_1__.CUBEMAP_PATH);\r\n                \r\n                // Load cubemap textures\r\n                const cubeTexture = cubeTextureLoader.load([\r\n                    'px.jpg', 'nx.jpg',\r\n                    'py.jpg', 'ny.jpg',\r\n                    'pz.jpg', 'nz.jpg'\r\n                ], \r\n                // Callback when loaded\r\n                () => {\r\n                    scene.background = cubeTexture;\r\n                    scene.environment = cubeTexture;\r\n                    console.log('City environment loaded');\r\n                },\r\n                undefined,\r\n                (error) => {\r\n                    console.error('Error loading cubemap:', error);\r\n                    // Fallback to default white if cubemap fails to load\r\n                    scene.background = new three__WEBPACK_IMPORTED_MODULE_4__.Color(0xf2f2f2);\r\n                    scene.environment = null;\r\n                });\r\n                break;\r\n                \r\n            case 'garage':\r\n                    glTFLoader.setPath(_config__WEBPACK_IMPORTED_MODULE_1__.STAGE_PATH + 'garage/').load('scene.gltf', \r\n                        (gltf) => {\r\n                            skyboxModel = gltf.scene;\r\n                            \r\n                            // Apply the same initial setup as in init()\r\n                            skyboxModel.scale.set(1, 1, 1);\r\n                            skyboxModel.position.set(0, 0, 0);\r\n                            \r\n                            // Apply materials and setup\r\n                            skyboxModel.traverse((obj) => {\r\n                                if (obj.isMesh) {\r\n                                    obj.castShadow = true;\r\n                                    obj.receiveShadow = true;\r\n                                    \r\n                                    if (obj.material && obj.material.name === 'Material.001') {\r\n                                        // Recreate glass material\r\n                                        obj.material = new three__WEBPACK_IMPORTED_MODULE_4__.MeshPhysicalMaterial({\r\n                                            color: 0x666666,\r\n                                            metalness: 0.3,\r\n                                            roughness: 0.0,\r\n                                            transparent: true,\r\n                                            opacity: 0.2,\r\n                                            transmission: 0.8,\r\n                                            clearcoat: 0.5,\r\n                                            clearcoatRoughness: 0.0,\r\n                                            side: three__WEBPACK_IMPORTED_MODULE_4__.DoubleSide,\r\n                                            envMapIntensity: 2.0\r\n                                        });\r\n                                        obj.material.name = 'Material.001';\r\n                                        obj.material.needsUpdate = true;\r\n                                    }\r\n                                }\r\n                            });\r\n                            \r\n                            scene.add(skyboxModel);\r\n                            skyboxModel.visible = true;\r\n                            console.log('Garage model reloaded and activated');\r\n                        },\r\n                        undefined,\r\n                        (error) => {\r\n                            console.error('Error reloading garage model:', error);\r\n                        }\r\n                    );\r\n                break;\r\n                \r\n            case 'default':\r\n            default:\r\n                // White environment (default)\r\n                scene.background = new three__WEBPACK_IMPORTED_MODULE_4__.Color(0xf2f2f2);\r\n                scene.environment = null;\r\n                console.log('Default white environment set');\r\n                break;\r\n        }\r\n        \r\n        currentEnvironment = environmentType;\r\n    }\r\n\r\n    //Method - Get mesh by material name\r\n    const getMeshByMaterialName = (materialName) => {\r\n        let targetMesh = null;\r\n        \r\n        //Iterate through the model\r\n        mActiveModel.traverse(obj => {\r\n            if (obj instanceof three__WEBPACK_IMPORTED_MODULE_4__.Mesh && obj.material.name === materialName) {\r\n                targetMesh = obj;\r\n            }\r\n        });\r\n        \r\n        return targetMesh;\r\n    }\r\n\r\n    //Return Public Methods/Properties\r\n    return { init, loadStage, loadActiveModel, setEntityColor, setEntityVisible, updateEnvironment, getMeshByMaterialName }\r\n\r\n})();\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./app/sceneManager.js?");

/***/ }),

/***/ 701:
/*!**************************!*\
  !*** ./app/utilities.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnimUtils: () => (/* binding */ AnimUtils),\n/* harmony export */   ColorUtils: () => (/* binding */ ColorUtils),\n/* harmony export */   MathUtils: () => (/* binding */ MathUtils),\n/* harmony export */   NetworkUtils: () => (/* binding */ NetworkUtils)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ 856);\n\r\n\r\n// Color Utility methods\r\nconst ColorUtils = {\r\n\r\n    //Convert web color format to hex color format (with Gamma correction)\r\n    webColorToHex: (webColor) => {\r\n\r\n        //Convert web color to hex base\r\n        const hex = parseInt(webColor.replace(\"#\", \"0x\"));\r\n\r\n        //Construct color from hex with Gamma Correction\r\n        return new three__WEBPACK_IMPORTED_MODULE_0__.Color(hex).convertSRGBToLinear();\r\n    }\r\n}\r\n\r\n//Network Utility methods\r\nconst NetworkUtils = {\r\n\r\n    //Fetches meta json at provided URL\r\n    fetchMeta: (path, onSuccess) => {\r\n\r\n        //Create an XML request\r\n        var xhr = new XMLHttpRequest();\r\n        //Set response type to json\r\n        xhr.responseType = 'json';\r\n        //Open metal url\r\n        xhr.open('GET', `${path}meta.json`, true);\r\n\r\n        //Load the url using xhr\r\n        xhr.onload = () => {\r\n\r\n            //Throw success if response available and status OK\r\n            if (xhr.status == 200 && xhr.response != null)\r\n                onSuccess(xhr.response)\r\n            //Else throw error\r\n            else\r\n                console.error('Error occurred loading meta JSON. Probably invalid JSON format.');\r\n        }\r\n\r\n        //Execute the xhr request\r\n        xhr.send(null);\r\n    }\r\n}\r\n\r\n//Custom Math Utility methods\r\nconst MathUtils = {\r\n\r\n    coordR2L: (point) => {\r\n\r\n        //Swap Y and Z with Z=-Y\r\n        return { x: point.x, y: point.z, z: -point.y };\r\n    },\r\n\r\n    vector3DegToRadian: (point) => {\r\n        //The per degree converter\r\n        var degree = Math.PI / 180;\r\n        //Return the new vector3 in radian\r\n        return new three__WEBPACK_IMPORTED_MODULE_0__.Euler(point.x * degree, point.y * degree, point.z * degree, 'XYZ');\r\n    }\r\n}\r\n\r\n//HTML Animation Utility methods\r\nconst AnimUtils = {\r\n\r\n    //Fade in an HTML element by duration\r\n    fadeElementIn: (element, duration = 500, options = { display: 'block' }, callback) => {\r\n\r\n        //Ignore if element not available\r\n        if (!element)\r\n            return;\r\n\r\n        //Set style to visible/display for opacity to apply\r\n        element.style.display = options.display;\r\n        element.style.visibility = \"visible\";\r\n        element.style.opacity = 0;\r\n        element.style.filter = \"alpha(opacity=0)\";\r\n\r\n        //Set initial opacity to 0\r\n        var opacity = 0;\r\n\r\n        //Timed recurring\r\n        var timer = setInterval(() => {\r\n\r\n            //Increment opacity linear\r\n            opacity += 50 / duration;\r\n\r\n            //Exit timer on max opacity\r\n            if (opacity >= 0.95) {\r\n\r\n                //Clear timer\r\n                clearInterval(timer);\r\n\r\n                //Set final values\r\n                opacity = 1;\r\n\r\n                //Invoke callback with element;\r\n                if (callback) callback(element)\r\n            }\r\n\r\n            //Apply updated opacity\r\n            element.style.opacity = opacity;\r\n            element.style.filter = \"alpha(opacity=\" + opacity * 100 + \")\";\r\n\r\n        }, 50);\r\n    },\r\n\r\n    //Fade out an HTML element by duration\r\n    fadeElementOut: (element, duration = 500, callback) => {\r\n\r\n        //Ignore if element not available\r\n        if (!element)\r\n            return;\r\n\r\n        //Opacity\r\n        let opacity = 1;\r\n\r\n        //Timer function\r\n        let timer = setInterval(() => {\r\n\r\n            //Decrement opacity linear\r\n            opacity -= 50 / duration;\r\n\r\n            //Exit timer on min opacity\r\n            if (opacity <= 0) {\r\n\r\n                //Clear timer\r\n                clearInterval(timer);\r\n\r\n                //Set final values\r\n                opacity = 0;\r\n                element.style.display = \"none\";\r\n                element.style.visibility = \"hidden\";\r\n\r\n                //Invoke callback with element;\r\n                if (callback)\r\n                    callback(element);\r\n            }\r\n\r\n            //Apply updated opacity\r\n            element.style.opacity = opacity;\r\n            element.style.filter = \"alpha(opacity=\" + opacity * 100 + \")\";\r\n\r\n        }, 50);\r\n    },\r\n\r\n    //Fades in volume of an audio element\r\n    fadeAudioIn: (audio, duration = 1000, options = { max: 1 }, callback) => {\r\n\r\n        //Ignore if audio not available\r\n        if (!audio)\r\n            return;\r\n\r\n        //Set start volume\r\n        let vol = 0;\r\n\r\n        //Reset volume\r\n        audio.volume = vol;\r\n        //Start if not playing\r\n        if (audio.paused) audio.play();\r\n\r\n        //Timer function\r\n        let timer = setInterval(() => {\r\n\r\n            //Increment volume linear\r\n            vol += 50 / duration;\r\n\r\n            if (vol >= options.max) {\r\n\r\n                //Clear timer\r\n                clearInterval(timer);\r\n\r\n                //Set final values\r\n                vol = options.max;\r\n\r\n                //Invoke callback with element;\r\n                if (callback) callback(audio)\r\n            }\r\n\r\n            //Apply updated volume\r\n            audio.volume = vol;\r\n\r\n        }, 50)\r\n    },\r\n\r\n    //Fades out volume of an audio element\r\n    fadeAudioOut: (audio, duration = 1000, callback) => {\r\n\r\n        //Ignore if audio not available\r\n        if (!audio)\r\n            return;\r\n\r\n        //Get start volume\r\n        let vol = audio.volume;\r\n\r\n        //Timer function\r\n        let timer = setInterval(() => {\r\n\r\n            //Decrement volume linear\r\n            vol -= 50 / duration;\r\n\r\n            if (vol <= 0) {\r\n\r\n                //Clear timer\r\n                clearInterval(timer);\r\n                //Set final values\r\n                vol = 0;\r\n\r\n                //Invoke callback with audio element;\r\n                if (callback) callback(audio);\r\n            }\r\n\r\n            //Apply updated volume\r\n            audio.volume = vol;\r\n\r\n        }, 50);\r\n\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack:///./app/utilities.js?");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__(806)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);